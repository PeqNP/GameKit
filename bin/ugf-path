#!/usr/bin/env python
#
# Provides process to initially configure and install 3rd party dependencies
# for UGF.
#
# @copyright (c) 2016 Upstart Illustration LLC. All rights reserved.
#

from ugf.config import configpath, checkconfig, Config

VERSION = "ugf-configure v1.0.0"

def main():
    pass

if __name__ == "__main__":
    import argparse

    operations = ["configure", "print"]

    parser = argparse.ArgumentParser(description="Upstart Game Framework - Configure local and remote paths")
    parser.add_argument('operations', help="Installation processes: {}. Default: configure".format(", ".join(operations)), nargs="*", default=["all"])
    args = parser.parse_args()

    print("{}, Time: {}".format(VERSION, str(datetime.now())))

    valid_operations = ["all"] + operations
    for option in args.operations:
        if option not in valid_operations:
            print("Invalid configure option '{}'. Valid operations are: {}".format(option, ", ".join(valid_operations)))
            sys.exit(1)

    options = "all" in args.operations and operations or args.operations

    # print current configuration
    # configure
    # download - must be configured first
    # install - must be downloaded first
    config = Config.load(configpath())
    checkconfig(config)

    if "print" in options:
        print("Local: {}".format(config.basepath))
        print("Remote: {}".format(config.remote))
    
    if "configure" in options:
        config.basepath = raw_input("Path to base UGF path: ")
        config.remote = raw_input("URL remote for UGF Git repository: ")
        config.save()
        print("Saved config to: {}".format(configpath()))
