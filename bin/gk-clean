#!/usr/bin/env python
#
# Cleans a selected graphics library built directory.
#
# @copyright 2015 Upstart Illustration LLC. All rights reserved.
#

import os

from gamekit import gethomedir
from gamekit.config import configpath, checkconfig, Config, ProjectConfig
from gamekit.pathbuilder import get_graphics_path_builder, ProjectPathBuilder

if __name__ == "__main__":
    import argparse

    parser = argparse.ArgumentParser(description="GameKit - Clean a graphics project")
    parser.add_argument('--version', help="The version of cocos to clean. Version must be in the format of #.#.# (e.g. 1.0.4)")
    args = parser.parse_args()

    config = Config.load(configpath())
    version = None
    if args.version:
        version = args.version
    else:
        checkconfig(config)
        source = ProjectPathBuilder(config)
        project = ProjectConfig.load(source.configpath())
        version = project.graphics.version

    builder = get_graphics_path_builder(config, project.graphics, version=version)
    print("Cleaning graphics library ({}) version ({}) at ({})".format(graphics.name, version, builder.basepath()))
    builder.clean()
